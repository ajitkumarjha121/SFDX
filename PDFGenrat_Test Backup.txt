@isTest
private class PDFGenrat_Test {

    static testMethod void TestConfigurator() {
         Boolean pricebookRefresh;
        
        //opportunity record test
        List<Opportunity> listOppRecord = new List<Opportunity>();
        Opportunity opprec = new Opportunity(Name = 'ajit', Status__c = 'Open', Total_Price_in_USD__c= 10, StageName = 'Prospecting', CloseDate = system.today());
        insert opprec;
        Test.startTest();
        listOppRecord.add(opprec);
        
        //insert a new product
        Product2 p = new product2(name='x',CGM_Product_Group__c = '');
        insert p;
        
        Pricebook2 pb = new pricebook2(name='test');
        insert pb;
        PricebookEntry pbe = new PricebookEntry(pricebook2id=pb.id, product2id=p.id,unitprice=1.0, isActive=true,useStandardPrice=true);
        insert pbe;
        
        List<OpportunityLineItem> listOpplineRecord = new List<OpportunityLineItem>();
        OpportunityLineItem opplinerec = new OpportunityLineItem(PricebookEntryId = pbe.id, CGM_Per_Unit_Doll_Disc__c = 10, CGM_Dealer_Price_Per_Unit__c = 22, 
                                                                 Quantity = 3, CGM_Escalator_Per_Unit__c = 11,
                                                                 Quote_Comments__c = 'testcmnt', Planned_RTS_Date__c = date.today(), Status__c = 'open', 
                                                                 Opportunityid = opprec.id , Show_on_Quote__c = true);
        insert opplinerec;
        listOpplineRecord.add(opplinerec);
        
        //Mining_Escalator_Data__c record test
        List<Mining_Escalator_Data__c> miningEscalatorsDataRecord = new List<Mining_Escalator_Data__c>();
        Mining_Escalator_Data__c miningescrec= new Mining_Escalator_Data__c(Rate__c= 2, Model__c = '789D', Date__c = date.today(), Price_Book__c = 'July 2018 Mining Price Book');
        insert miningescrec;
        miningEscalatorsDataRecord.add(miningescrec);
        
        //Account record test
        Account accrec = new Account(Name = 'ajit', BillingStreet = 'EC2', BillingCity = 'Bangalore', BillingState = 'Karnataka', BillingPostalCode = '560100', BillingCountry='india');
        insert accrec;

        PageReference pageRef = Page.Quote;
        Test.setCurrentPage(pageRef);
        ApexPages.StandardController sc = new ApexPages.StandardController(opprec);
        PDFGenratController testAccPlan = new PDFGenratController(sc);
        testAccPlan.PdfGeneration();
        testAccPlan.savePdf();
         
        PDFGenratController.OpportunityLineItemWrapper pdfwrap = new PDFGenratController.OpportunityLineItemWrapper();
        //pdfwrap.item = 
        pdfwrap.escalator = 1.2;
        pdfwrap.comments = 'hello test';

        Test.stopTest();
    }
     static testMethod void TestConfigurator1() {
         Boolean pricebookRefresh;
        
        //opportunity record test 
        List<Opportunity> listOppRecord = new List<Opportunity>();
        Opportunity opprec = new Opportunity(Name = 'ajit', Status__c = 'Open', Total_Price_in_USD__c= 10, StageName = 'Prospecting', CloseDate = system.today() ,QuoteVersion__c = 10);
        insert opprec;
        Test.startTest();
        listOppRecord.add(opprec);
        
        Account accrec = new Account(Name = 'ajit', BillingStreet = 'EC2', BillingCity = 'Bangalore', BillingState = 'Karnataka', BillingPostalCode = '560100', BillingCountry='india');
        insert accrec;

        
        PageReference pageRef = Page.Quote;
        Test.setCurrentPage(pageRef);
        ApexPages.StandardController sc = new ApexPages.StandardController(opprec);
        PDFGenratController testAccPlan = new PDFGenratController(sc);
        testAccPlan.PdfGeneration();
        testAccPlan.savePdf();

        Test.stopTest();
    }
}